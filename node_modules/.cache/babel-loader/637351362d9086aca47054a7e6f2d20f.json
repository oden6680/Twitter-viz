{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/oda/Documents/development/Twitter-viz/src/components/ChoroplethMap/index.js\";\nimport React, { useEffect, useState } from \"react\";\nimport * as d3 from \"d3\";\nimport * as topojson from \"topojson\";\nimport { useRecoilState } from \"recoil\";\nimport { selectedPrefectureState } from \"../../atoms\";\nexport default function ChoroplethMap({\n  crimeData\n}) {\n  const mapDataUrl = `${process.env.PUBLIC_URL}/data/japan.json`;\n  const width = 1000; //描画幅\n\n  const height = 800; //描画高さ\n\n  const centerPos = [137.0, 38.2]; // 地図のセンター位置\n\n  const scale = 1000; // 地図のスケール\n  //地図の描画時の設定\n\n  const projection = d3.geoMercator().center(centerPos).translate([width / 2, height / 2]).scale(scale); //地図をpathに変換\n\n  const path = d3.geoPath().projection(projection);\n  const color = d3.scaleLinear().domain(d3.extent(features, feature => feature.properties.value)).range([\"#ccc\", \"#f00\"]); // SVG要素を追加\n\n  const svg = d3.select(`#map-container`).append(`svg`).attr(`viewBox`, `0 0 ${width} ${height}`).attr(`width`, `100%`).attr(`height`, `100%`);\n\n  function PrefectureWrap({\n    children,\n    feature\n  }) {\n    return /*#__PURE__*/_jsxDEV(\"g\", {\n      transform: `${feature.properties.nam_ja === \"北海道\" ? \"translate(-600, 300)\" : \"\"}${feature.properties.nam_ja === \"沖縄県\" ? \"translate(900, -400)\" : \"\"}`,\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mx\",\n    children: /*#__PURE__*/_jsxDEV(\"svg\", {\n      width: width,\n      height: height,\n      children: /*#__PURE__*/_jsxDEV(\"g\", {\n        transform: \"translate(200,300)\",\n        children: features.map((feature, i) => {\n          return /*#__PURE__*/_jsxDEV(PrefectureWrap, {\n            feature: feature,\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              d: path(feature),\n              fill: color(feature.properties.value),\n              stroke: `${selectedPrefecture === feature.properties.nam_ja ? \"black\" : \"white\"}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 60,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n}\n_c = ChoroplethMap;\n\nvar _c;\n\n$RefreshReg$(_c, \"ChoroplethMap\");","map":{"version":3,"sources":["/Users/oda/Documents/development/Twitter-viz/src/components/ChoroplethMap/index.js"],"names":["React","useEffect","useState","d3","topojson","useRecoilState","selectedPrefectureState","ChoroplethMap","crimeData","mapDataUrl","process","env","PUBLIC_URL","width","height","centerPos","scale","projection","geoMercator","center","translate","path","geoPath","color","scaleLinear","domain","extent","features","feature","properties","value","range","svg","select","append","attr","PrefectureWrap","children","nam_ja","map","i","selectedPrefecture"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport * as d3 from \"d3\";\nimport * as topojson from \"topojson\";\nimport { useRecoilState } from \"recoil\";\nimport { selectedPrefectureState } from \"../../atoms\";\n\nexport default function ChoroplethMap({ crimeData }) {\n\n  const mapDataUrl = `${process.env.PUBLIC_URL}/data/japan.json`;\n\n  const width = 1000;//描画幅\n  const height = 800;//描画高さ\n  const centerPos = [137.0, 38.2]; // 地図のセンター位置\n  const scale = 1000; // 地図のスケール\n\n  //地図の描画時の設定\n  const projection = d3\n    .geoMercator()\n    .center(centerPos)\n    .translate([width/2, height/2])\n    .scale(scale);\n\n  //地図をpathに変換\n  const path = d3.geoPath().projection(projection);\n\n  const color = d3\n    .scaleLinear()\n    .domain(d3.extent(features, (feature) => feature.properties.value))\n    .range([\"#ccc\", \"#f00\"]);\n\n  // SVG要素を追加\n  const svg = d3\n    .select(`#map-container`)\n    .append(`svg`)\n    .attr(`viewBox`, `0 0 ${width} ${height}`)\n    .attr(`width`, `100%`)\n    .attr(`height`, `100%`);\n\n  function PrefectureWrap({ children, feature }) {\n    return (\n      <g\n        transform={`${\n          feature.properties.nam_ja === \"北海道\" ? \"translate(-600, 300)\" : \"\"\n        }${\n          feature.properties.nam_ja === \"沖縄県\" ? \"translate(900, -400)\" : \"\"\n        }`}\n      >\n        {children}\n      </g>\n    );\n  }\n\n  return (\n    <div className=\"container mx\">\n      <svg width={width} height={height}>\n        <g transform=\"translate(200,300)\">\n          {features.map((feature, i) => {\n            return (\n              <PrefectureWrap feature={feature}>\n                <path\n                  d={path(feature)}\n                  fill={color(feature.properties.value)}\n                  stroke={`${\n                    selectedPrefecture === feature.properties.nam_ja\n                      ? \"black\"\n                      : \"white\"\n                  }`}\n                />\n              </PrefectureWrap>\n            );\n          })}\n        </g>\n      </svg>\n    </div>\n  );\n}"]},"metadata":{},"sourceType":"module"}